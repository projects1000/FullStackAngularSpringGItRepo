<div class="form-container">
  <h2>Contact Us</h2>
  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">

    <label>Name</label>
    <input formControlName="name" placeholder="Enter your name" />
    <div *ngIf="submitted && contactForm.controls['name'].errors" class="error">
      <span *ngIf="contactForm.controls['name'].errors['required']">Name is required.</span>
      <span *ngIf="contactForm.controls['name'].errors['pattern']">Only letters and spaces allowed.</span>
    </div>

    <label>Country</label>
    <select formControlName="country" (change)="onCountryChange($event)">
      <option *ngFor="let country of countries" [value]="country.name">{{ country.name }}</option>
    </select>
    <div *ngIf="submitted && contactForm.controls['country'].invalid" class="error">
      Please select a country.
    </div>

    <label>Email</label>
    <input formControlName="email" placeholder="Enter your email" />
    <div *ngIf="submitted && contactForm.controls['email'].errors" class="error">
      <span *ngIf="contactForm.controls['email'].errors['required']">Email is required.</span>
      <span *ngIf="contactForm.controls['email'].errors['email']">Please enter a valid email.</span>
    </div>

    <label>Mobile</label>
    <div class="mobile-field">
      <span>{{ countryCode }}</span>
      <input formControlName="mobile" placeholder="Enter mobile number" />
    </div>
    <div *ngIf="submitted && contactForm.controls['mobile'].errors" class="error">
      <span *ngIf="contactForm.controls['mobile'].errors['required']">Mobile number is required.</span>
      <span *ngIf="contactForm.controls['mobile'].errors['pattern']">Only digits allowed.</span>
      <span *ngIf="contactForm.controls['mobile'].errors['minlength']">At least 10 digits required.</span>
      <span *ngIf="contactForm.controls['mobile'].errors['maxlength']">Only 10 digits allowed.</span>
    </div>

    <label>State</label>
    <select formControlName="state">
      <option value="">Select State</option>
      <option *ngFor="let s of states" [value]="s">{{ s }}</option>
    </select>
    <div *ngIf="submitted && contactForm.controls['state'].invalid" class="error">
      Please select a state.
    </div>

    <label>Date of Birth</label>
    <input type="date" formControlName="dob" />
    <div *ngIf="submitted && contactForm.controls['dob'].invalid" class="error">
      Please select your date of birth.
    </div>

    <label>Message</label>
    <textarea formControlName="message" placeholder="Your message"></textarea>
    <div *ngIf="submitted && contactForm.controls['message'].invalid" class="error">
      Please enter a message.
    </div>

    <button type="submit">Submit</button>

    <div class="output" [class.show]="message">
      <strong>{{ message }}</strong>
    </div>
  </form>
</div>
